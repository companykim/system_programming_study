# chapter 7 프로세스 생성과 실행

## 1. 프로세스 생성

  프로세스는 프로그램 안에서 다른 프로그램을 실행해 생성하기도 한다.

  ### system() 함수로 프로그램 실행하기
    
    system() 함수는 프로그램 안에서 새로운 프로그램을 실행시키는 가장 간단한 방법이지만 명령을 실행하기 위해 셸까지 동작시키므로 비효율적이다.

    system(): 프로그램 실행
    --------------------------------------
    #include <stdlib.h>

    int system(const char *command);

    * command: 실행할 명령이나 실행 파일명
    --------------------------------------
    기존 명령이나 실행 파일명을 인자로 받아 셸에 전달한다.
    셸은 내부적으로 새 프로세스를 생성해 인자로 받은 명령을 실행하고, 해당 명령의 실행이 끝날 때까지 기다렸다가 종료 상태를 리턴함.

  ### 프로세스 생성
  
    fork 함수는 부모 프로세스를 거의 그대로 복제해 새로운 프로세스를 생성한다.
    fork() 함수가 생성한 새로운 프로세스를 자식 프로세스라고 한다.
    fork() 함수를 호출한 프로세스는 부모 프로세스가 된다. 
    fork() 함수가 리턴하면 부모 프로세스와 자식 프로세스가 동시에 동작하는데, 어느 프로세스가 먼저 실행될지는 알 수 없다.
    처리 순서는 시스템의 스케줄링에 따라 달라진다.

  ### fork 함수의 특징

    1. fork 함수를 호출
    2. 새로운 프로세스를 생성한다.(자식 프로세스)
    3. fork() 함수로 생성한 자식 프로세스의 메모리 공간은 부모 프로세스의 메모리 공간을 그대로 복사해서 만든다.
    4. fork() 함수는 부모 프로세스에는 자식 프로세스의 PID를 리턴하고 자식 프로세스에는 0을 리턴한다.

    자식 프로세스는 부모 프로세스의 메모리를 복사할 뿐만 아니라 다양한 속성을 상속받는다.

    - 자식 프로세스가 상속받는 대표적인 속성은
    ---------------------------------------------------------------------------------
    실제 사용자 ID(RUID), 유효 사용자 ID(EUID), 실제 그룹 ID(RGID), 유효 그룹 ID(EGID)
    환경 변수
    열린 파일 기술자
    시그널 처리 설정
    setuid, setgid 설정
    현재 작업 디렉토리
    unmask 설정값
    사용 가능한 자원 제한
    ---------------------------------------------------------------------------------

    - 자식 프로세스는 부모 프로세스의 속성을 대부분 상속 받지만 부모 프로세스와 다른 점
    ---------------------------------------------------------------------------------
    자식 프로세스는 새로 할당한 프로세스 ID를 갖는다.
    자식 프로세스는 부모 프로세스의 PPID와 다른 자신만의 PPID를 갖는다. 즉, 자식 프로세스를 호출한 부모 프로세스가 자식 프로세스의 PPID로 설정된다.
    자식 프로세스는 부모 프로세스가 연 파일 기술자에 대한 복사본을 갖고 있다. 따라서 부모 프로세스와 자식 프로세스가 같은 파일의 오프셋을 공유하고 있는 상태가 되므로 읽거나 쓸 때 주의해야 한다.
    자식 프로세스는 부모 프로세스가 설정한 프로세스 잠금, 파일 잠금, 기타 메모리 잠금 등은 상속하지 않는다.
    처리되지 않은 시그널은 자식 프로세스로 상속되지 않는다.
    자식 프로세스의 tms 구조체 값은 0으로 초기화된다. 즉, 프로세스 실행 시간을 측정하는 기준 값이 새로 설정된다.
    ---------------------------------------------------------------------------------
    
